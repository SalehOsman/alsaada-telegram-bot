# ๐ฐ ูุธุงู ุงูุฑูุงุชุจ ุงูุดุงูู - ุงูุชูุซูู ุงููุงูู
## Comprehensive Payroll System - Complete Documentation

> **ุขุฎุฑ ุชุญุฏูุซ:** 7 ููููุจุฑ 2025  
> **ุงูุฅุตุฏุงุฑ:** 3.0  
> **ุงูุญุงูุฉ:** ูุธุงู ูุงูู ูุฌุงูุฒ ููุฅูุชุงุฌ

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#-ูุธุฑุฉ-ุนุงูุฉ)
2. [ุฃููุงุน ุญุณุงุจ ุงูุฑูุงุชุจ](#-ุฃููุงุน-ุญุณุงุจ-ุงูุฑูุงุชุจ)
   - [ุงูุฑุงุชุจ ุงูุดูุฑู (ููููุธููู ุงูุซุงุจุชูู)](#1-ุงูุฑุงุชุจ-ุงูุดูุฑู-monthly-payroll)
   - [ุงูุฑุงุชุจ ุงููููู (ููููุงูููู)](#2-ุงูุฑุงุชุจ-ุงููููู-daily-payroll)
3. [ููุทู ุงูุญุณุงุจ ุงููุชูุฏู](#-ููุทู-ุงูุญุณุงุจ-ุงููุชูุฏู)
   - [ุฎุตู ุงูุฅุฌุงุฒุงุช ุจุฏูู ูุฑุชุจ](#ุฃ-ุฎุตู-ุงูุฅุฌุงุฒุงุช-ุจุฏูู-ูุฑุชุจ)
   - [ุญุฏ ุงูุฑุงุชุจ ููููุธู ุงูููููู](#ุจ-ุญุฏ-ุงูุฑุงุชุจ-ููููุธู-ุงูููููู)
4. [ุฅุฏุงุฑุฉ ุงูุจุฏูุงุช ูุงูููุงูุขุช](#-ุฅุฏุงุฑุฉ-ุงูุจุฏูุงุช-ูุงูููุงูุขุช)
   - [ุฃููุงุน ุงูุจุฏูุงุช](#ุฃููุงุน-ุงูุจุฏูุงุช)
   - [ุจุฏูุงุช ุงููุธุงุฆู ูุงูููุธููู](#ุจุฏูุงุช-ุงููุธุงุฆู-ูุงูููุธููู)
   - [ุงูููุงูุขุช](#ุงูููุงูุขุช)
   - [ุงูุงุณุชุญูุงูุงุช ุงูุนูููุฉ](#ุงูุงุณุชุญูุงูุงุช-ุงูุนูููุฉ)
5. [ูุงุฌูุฉ ุญุณุงุจ ุงูุฑุงุชุจ ูุชูุฑูุฑ ุงูุฑุงุชุจ](#-ูุงุฌูุฉ-ุญุณุงุจ-ุงูุฑุงุชุจ-ูุชูุฑูุฑ-ุงูุฑุงุชุจ)
6. [ุงููููุงุช ุงูุจุฑูุฌูุฉ ุงููุฑุชุจุทุฉ](#-ุงููููุงุช-ุงูุจุฑูุฌูุฉ-ุงููุฑุชุจุทุฉ)
7. [ุงูุฌุฏุงูู ุงููุฑุชุจุทุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช](#-ุงูุฌุฏุงูู-ุงููุฑุชุจุทุฉ-ุจูุงุนุฏุฉ-ุงูุจูุงูุงุช)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูุฑูุงุชุจ ูู ุงููุญุฑู ุงููุงูู ููุธุงู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉุ ููู ูุณุคูู ุนู ุญุณุงุจ ุตุงูู ูุณุชุญูุงุช ุงูููุธููู ุจุฏูุฉ ูุชูุงููุฉ. ุชู ุชุตููู ุงููุธุงู ููููู ุดุงููุงู ููุงุฏุฑุงู ุนูู ุงูุชุนุงูู ูุน ุงูุญุงูุงุช ุงููุนูุฏุฉุ ูุซู ุงูุฑูุงุชุจ ุงูููููุฉ ูุงูุดูุฑูุฉุ ูุงูุฎุตููุงุช ุงููุชููุนุฉุ ูุญุงูุงุช ุงูุฅููุงู ุนู ุงูุนูู.

### โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:

- โ **ุฏุนู ูุฒุฏูุฌ:** ูุชุนุงูู ูุน ุฃูุธูุฉ ุงูุฑูุงุชุจ **ุงูุดูุฑูุฉ** ู**ุงูููููุฉ**.
- ๐งฎ **ุญุณุงุจุงุช ุฏูููุฉ:** ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌููุน ุงููุชุบูุฑุงุช: ุงูุจุฏูุงุชุ ุงูููุงูุขุชุ ุงูุณููุ ุงูุนููุจุงุชุ ูุงูุฅุฌุงุฒุงุช ุจุฏูู ูุฑุชุจ.
- ๐ซ **ูุนุงูุฌุฉ ุงูุฅููุงูุงุช:** ููุทู ุฎุงุต ูุญุณุงุจ ุฑุงุชุจ ุงูููุธู ุงูููููู ูุถูุงู ุงูุฏูุฉ ุงููุงููุฉ.
- ๐ **ุชูุงุฑูุฑ ููุตูุฉ:** ุฅูุดุงุก ุชูุฑูุฑ ุฑุงุชุจ ูุงุถุญ ูููุตู ููู ููุธูุ ูุงุจู ููุชุตุฏูุฑ ูุงูุญูุธ.
- ๐ง **ูุฑููุฉ ุนุงููุฉ:** ุฅุฏุงุฑุฉ ุณููุฉ ููุจุฏูุงุช ูุงูููุงูุขุช ุนูู ูุณุชูู ุงูุดุฑูุฉุ ุงููุธููุฉุ ุฃู ุงูููุธู.

---

## ๐ ุฃููุงุน ุญุณุงุจ ุงูุฑูุงุชุจ

ูุฏุนู ุงููุธุงู ููุนูู ุฑุฆูุณููู ูู ุญุณุงุจ ุงูุฑูุงุชุจุ ูุชู ุชุญุฏูุฏููุง ููู ููุธู ูู ุญูู `salaryCalculationType`.

### 1. ุงูุฑุงุชุจ ุงูุดูุฑู (Monthly Payroll)

-   **ููู:** ููููุธููู ุงูุซุงุจุชูู ุงูุฐูู ูุชูุงุถูู ุฑุงุชุจูุง ุดูุฑููุง.
-   **ุงูููู:** `payroll-calculate.handler.ts` (ุถูู `calculateMonthlyPayroll`)
-   **ุงููุนุงุฏูุฉ ุงูุฃุณุงุณูุฉ:**

    ```
    ุตุงูู ุงูุฑุงุชุจ = (ุงูุฑุงุชุจ ุงูุฃุณุงุณู + ุฅุฌูุงูู ุงูุจุฏูุงุช ุงูุซุงุจุชุฉ + ุฅุฌูุงูู ุงูููุงูุขุช) 
                  - (ุฅุฌูุงูู ุงูุณูู ูุงููุณุญูุจุงุช) 
                  - (ุฅุฌูุงูู ุงูุนููุจุงุช ุงููุงููุฉ) 
                  - (ุฎุตู ุงูุฅุฌุงุฒุงุช ุจุฏูู ูุฑุชุจ) 
                  - (ุฎุตู ุฃูุงู ุงูุนููุจุงุช)
    ```

### 2. ุงูุฑุงุชุจ ุงููููู (Daily Payroll)

-   **ููู:** ููููุธููู ุจุงูููุงููุฉ ุงูุฐูู ูุชูุงุถูู ุฃุฌุฑูุง ุนูู ุฃุณุงุณ ุฃูุงู ุงูุนูู ุงููุนููุฉ.
-   **ุงูููู:** `payroll-calculate.handler.ts` (ุถูู `calculateDailyPayroll`)
-   **ุงููุนุงุฏูุฉ ุงูุฃุณุงุณูุฉ:**

    ```
    ุงูุฑุงุชุจ ุงููุณุชุญู ุนู ุฃูุงู ุงูุนูู = (ุงูุฑุงุชุจ ุงูุฃุณุงุณู / 30) * ุนุฏุฏ ุฃูุงู ุงูุนูู ุงููุนููุฉ

    ุตุงูู ุงูุฑุงุชุจ = (ุงูุฑุงุชุจ ุงููุณุชุญู + ุฅุฌูุงูู ุงูุจุฏูุงุช + ุฅุฌูุงูู ุงูููุงูุขุช) 
                  - (ุฅุฌูุงูู ุงูุณูู ูุงููุณุญูุจุงุช) 
                  - (ุฅุฌูุงูู ุงูุนููุจุงุช)
    ```

---

## ๐ง ููุทู ุงูุญุณุงุจ ุงููุชูุฏู

ูุญุชูู ูุธุงู ุงูุฑูุงุชุจ ุนูู ููุทู ููุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ ุงูุชู ุชุคุซุฑ ุจุดูู ูุจุงุดุฑ ุนูู ุตุงูู ุงูุฑุงุชุจ.

### ุฃ) ุฎุตู ุงูุฅุฌุงุฒุงุช ุจุฏูู ูุฑุชุจ

-   **ุงูุชุฃุซูุฑ:** ููุทุจู **ููุท ุนูู ูุธุงู ุงูุฑุงุชุจ ุงูุดูุฑู**.
-   **ุงูุขููุฉ:**
    1.  ุนูุฏ ุญุณุงุจ ุงูุฑุงุชุจ ุงูุดูุฑูุ ูุจุญุซ ุงููุธุงู ุนู ุฃู ุฅุฌุงุฒุงุช ูู ููุน `UNPAID` ููููุธู ุฎูุงู ุงูุดูุฑ ุงููุญุฏุฏ.
    2.  ูุญุณุจ ุฅุฌูุงูู ุนุฏุฏ ุฃูุงู ูุฐู ุงูุฅุฌุงุฒุงุช.
    3.  ูุญุณุจ ูุนุฏู ุงูุฃุฌุฑ ุงููููู: `dailyRate = basicSalary / 30`.
    4.  ูุญุณุจ ูุจูุบ ุงูุฎุตู: `unpaidLeaveDeduction = dailyRate * totalUnpaidLeaveDays`.
    5.  ูุชู ุทุฑุญ ูุฐุง ุงููุจูุบ ูู ุตุงูู ุงูุฑุงุชุจ.
-   **ูุซุงู:** ููุธู ุฑุงุชุจู 6000 ุฌ.ู ูุฃุฎุฐ ุฅุฌุงุฒุฉ ุจุฏูู ูุฑุชุจ ููุฏุฉ 4 ุฃูุงู.
    -   `dailyRate = 6000 / 30 = 200`
    -   `deduction = 200 * 4 = 800` ุฌ.ู (ุณูุชู ุฎุตููุง ูู ุฑุงุชุจู).

### ุจ) ุญุฏ ุงูุฑุงุชุจ ููููุธู ุงูููููู

-   **ุงูุชุฃุซูุฑ:** ููุทุจู ุนูู **ููุง ุงููุธุงููู** (ุงูุดูุฑู ูุงููููู).
-   **ุงููุงุนุฏุฉ:** ุฅุฐุง ูุงู ุงูููุธู ูู ุญุงูุฉ `SUSPENDED`ุ ูุฅู ุฑุงุชุจู ููุญุณุจ **ููุท ุนู ุงููุชุฑุฉ ุญุชู ุชุงุฑูุฎ ุจุฏุก ุงูุฅุฌุงุฒุฉ** ุงูุชู ุฃุฏุช ุฅูู ุฅููุงูู.
-   **ุงูุขููุฉ:**
    1.  ูุจู ุญุณุงุจ ุงูุฑุงุชุจุ ูุชุญูู ุงููุธุงู ูู `employee.employmentStatus`.
    2.  ุฅุฐุง ูุงูุช ุงูุญุงูุฉ `SUSPENDED`ุ ูุฌูุจ ุงููุธุงู ุชุงุฑูุฎ ุจุฏุก ุงูุฅุฌุงุฒุฉ ุงููุฑุชุจุทุฉ ุจุนููุจุฉ ุงูุฅููุงู (`suspensionLeave.startDate`).
    3.  ูุชู ุชุนุฏูู "ููุงูุฉ ูุชุฑุฉ" ุญุณุงุจ ุงูุฑุงุชุจ ูุชููู `suspensionLeave.startDate` ุจุฏูุงู ูู ููุงูุฉ ุงูุดูุฑ.
    4.  ูุชู ุญุณุงุจ ุฃูุงู ุงูุนูู ูุงูุฑุงุชุจ ุจูุงุกู ุนูู ูุฐู ุงููุชุฑุฉ ุงููุนุฏูุฉ.
-   **ูุซุงู:** ููุธู ุดูุฑู ุฑุงุชุจู 6000 ุฌ.ูุ ุชู ุฅููุงูู ุจุณุจุจ ุฅุฌุงุฒุฉ ุจุฏุฃุช ูู 10 ุฏูุณูุจุฑ.
    -   ุนูุฏ ุญุณุงุจ ุฑุงุชุจ ุดูุฑ ุฏูุณูุจุฑุ ุณูููู ุงููุธุงู ุจุญุณุงุจ ุงูุฑุงุชุจ ุนู ุงููุชุฑุฉ ูู 1 ุฅูู 9 ุฏูุณูุจุฑ ููุท (9 ุฃูุงู).
    -   `ุงูุฑุงุชุจ ุงููุณุชุญู = (6000 / 30) * 9 = 1800` ุฌ.ู (ุจุฏูุงู ูู 6000).

---

## ๐๏ธ ุฅุฏุงุฑุฉ ุงูุจุฏูุงุช ูุงูููุงูุขุช

ูููุฑ ุงููุธุงู ูุงุฌูุงุช ูุฑูุฉ ูุฅุฏุงุฑุฉ ุฌููุน ุฃููุงุน ุงููุณุชุญูุงุช ุงููุงููุฉ.

### ุฃููุงุน ุงูุจุฏูุงุช
**ุงูููู:** `payroll-allowance-types.handler.ts`
-   ูุงุฌูุฉ ูุชุนุฑูู ุฃููุงุน ุงูุจุฏูุงุช ุงููุฎุชููุฉ (ุจุฏู ุงูุชูุงูุ ุจุฏู ุณููุ ุจุฏู ุทุนุงูุ ุฅูุฎ).
-   ูุชู ุชุฎุฒูููุง ูู ุฌุฏูู `HR_AllowanceType`.

### ุจุฏูุงุช ุงููุธุงุฆู ูุงูููุธููู
**ุงููููุงุช:** `payroll-position-allowances.handler.ts`, `payroll-employee-allowances.handler.ts`
-   **ุจุฏูุงุช ุงููุธุงุฆู:** ูููู ุชุญุฏูุฏ ุจุฏูุงุช ุงูุชุฑุงุถูุฉ ููู ูุธููุฉ (ุชูุทุจู ุนูู ุฌููุน ุงูููุธููู ูู ูุฐู ุงููุธููุฉ).
-   **ุจุฏูุงุช ุงูููุธููู:** ูููู ุชุญุฏูุฏ ุจุฏูุงุช ุฎุงุตุฉ ูููุธู ูุนููุ ูุงูุชู ุชุชุฌุงูุฒ (override) ุจุฏูุงุช ุงููุธููุฉ.

### ุงูููุงูุขุช
**ุงูููู:** `payroll-bonuses.handler.ts`
-   ูุงุฌูุฉ ูุฅุถุงูุฉ ููุงูุขุช ุงุณุชุซูุงุฆูุฉ ููููุธููู.
-   ูููู ุฃู ุชููู ุงูููุงูุฃุฉ ูุฑุฏูุฉุ ุฃู ููุธููุฉ ูุนููุฉุ ุฃู ูุฌููุน ุงูููุธููู.
-   **ููุฒุฉ ูุงูุฉ:** ูุชู ุนุฑุถ **ูุตู ุงูููุงูุฃุฉ** (`description`) ูู ุชูุฑูุฑ ุงูุฑุงุชุจ ุจุฏูุงู ูู ุงูููุน ุงูุนุงูุ ููุง ูุนุทู ุชูุงุตูู ุฃูุถุญ (ูุซุงู: "ููุงูุฃุฉ ุชููู" ุจุฏูุงู ูู "ููุงูุฃุฉ ูุฑุฏูุฉ").

### ุงูุงุณุชุญูุงูุงุช ุงูุนูููุฉ
**ุงูููู:** `payroll-material-entitlements.handler.ts`
-   ูุธุงู ูุฅุฏุงุฑุฉ ุงููุณุชุญูุงุช ุบูุฑ ุงูููุฏูุฉ ุงูุชู ููุง ูููุฉ ูุงููุฉ (ูุซู ุงูุณุฌุงุฆุฑุ ุงููุฌุจุงุช).
-   ูุชู ุชุญุฏูุฏ ูููุฉ ูุฐู ุงููุณุชุญูุงุช ูุฎุตููุง ูู ุตุงูู ุงูุฑุงุชุจ.

---

## ๐ ูุงุฌูุฉ ุญุณุงุจ ุงูุฑุงุชุจ ูุชูุฑูุฑ ุงูุฑุงุชุจ

**ุงูููู:** `payroll-calculate.handler.ts`

-   **ุงููุงุฌูุฉ:** ูุงุฌูุฉ ุชูุงุนููุฉ ุชุทูุจ ูู ุงููุฏูุฑ ุงุฎุชูุงุฑ ุงูููุธู ูุงููุชุฑุฉ ุงูุฒูููุฉ (ูููู ุฃู ุดูุฑู).
-   **ุงูุชูุฑูุฑ:** ุจุนุฏ ุงูุญุณุงุจุ ูููู ุงููุธุงู ุจุฅูุดุงุก ุชูุฑูุฑ ูุตู ููุณู ุจุนูุงูุฉุ ููู ูุตูู ููููู ูุงุถุญูุง ูุณูู ุงููุฑุงุกุฉ.

**ุดูู ุงูุชูุฑูุฑ ุงููุญุณูู:**

```
๐ ุชูุฑูุฑ ุงูุฑุงุชุจ - ูุญูุฏ ุฃุญูุฏ

๐ฐ ููุฎุต ุงูุฑุงุชุจ:
ุงูุฑุงุชุจ ุงูุฃุณุงุณู: 5,000.00 ุฌ.ู
+ ุจุฏู ุงูุชูุงู: 300.00 ุฌ.ู
+ ุจุฏู ุทุนุงู: 200.00 ุฌ.ู
+ ููุงูุฃุฉ: 500.00 ุฌ.ู (ููุงูุฃุฉ ุชููู)
- ุฎุตู ุฅุฌุงุฒุฉ ุจุฏูู ูุฑุชุจ (3 ุฃูุงู): -500.00 ุฌ.ู
- ุณููุฉ: -1,000.00 ุฌ.ู
โโโโโโโโโโโโโโโโโโโ
๐ต ุตุงูู ุงูุฑุงุชุจ: 4,500.00 ุฌ.ู
```

-   **ุงูููุฒุงุช:**
    -   ูุนุฑุถ ูู ุจูุฏ ูู ุณุทุฑ ูููุตู.
    -   ููุตู ุจูู ุงูุฅุถุงูุงุช ูุงูุฎุตููุงุช.
    -   ูุนุฑุถ ูุตู ุงูููุงูุฃุฉ ููุฒูุฏ ูู ุงููุถูุญ.
    -   ูุณุชุฎุฏู ุฎุทูุง ูุงุตูุงู ูุจู ุนุฑุถ ุงูุตุงูู ุงูููุงุฆู.

---

## ๐ ุงููููุงุช ุงูุจุฑูุฌูุฉ ุงููุฑุชุจุทุฉ

| ุงูููู | ุงููุตู |
|---|---|
| `payroll.handler.ts` | ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ููุธุงู ุงูุฑูุงุชุจ. |
| `payroll-calculate.handler.ts` | **ุงูููู ุงูุฃูู (1,800+ ุณุทุฑ)**ุ ูุญุชูู ุนูู ููุทู ุญุณุงุจ ุงูุฑูุงุชุจ ุงูููููุฉ ูุงูุดูุฑูุฉ. |
| `payroll-allowance-types.handler.ts` | ุฅุฏุงุฑุฉ ุฃููุงุน ุงูุจุฏูุงุช. |
| `payroll-position-allowances.handler.ts` | ุฅุฏุงุฑุฉ ุงูุจุฏูุงุช ุงูุงูุชุฑุงุถูุฉ ูููุธุงุฆู. |
| `payroll-employee-allowances.handler.ts` | ุฅุฏุงุฑุฉ ุงูุจุฏูุงุช ุงููุฎุตุตุฉ ููููุธููู. |
| `payroll-bonuses.handler.ts` | ุฅุฏุงุฑุฉ ุงูููุงูุขุช. |
| `payroll-material-entitlements.handler.ts` | ุฅุฏุงุฑุฉ ุงูุงุณุชุญูุงูุงุช ุงูุนูููุฉ. |
| `monthly-payroll.handler.ts` | ูุธุงู ุงูุฑูุงุชุจ ุงูุดูุฑูุฉ ุงูููุญุฏ. |
| `payroll-financial-history.handler.ts` | ุนุฑุถ ุงูุณุฌู ุงููุงูู ููููุธู. |

---

## n๐๏ธ ุงูุฌุฏุงูู ุงููุฑุชุจุทุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

-   **`HR_PayrollRecord` / `HR_MonthlyPayroll`**: ูุชุฎุฒูู ูุชุงุฆุฌ ุญุณุงุจุงุช ุงูุฑูุงุชุจ.
    -   **ุญููู ูููุฉ:** `unpaidLeaveDays`, `unpaidLeaveDeduction`.
-   **`HR_AllowanceType`**: ูุชุนุฑูู ุฃููุงุน ุงูุจุฏูุงุช.
-   **`HR_PositionAllowance` / `HR_EmployeeAllowance`**: ูุฑุจุท ุงูุจุฏูุงุช ุจุงููุธุงุฆู ูุงูููุธููู.
-   **`HR_Bonus`**: ูุชุฎุฒูู ุงูููุงูุขุช.
    -   **ุญูู ููู:** `description`.
-   **`HR_MaterialEntitlement`**: ูุชุฎุฒูู ุงูุงุณุชุญูุงูุงุช ุงูุนูููุฉ.
-   **`HR_Transaction`**: ูุฌูุจ ุงูุณูู ูุงููุณุญูุจุงุช ุงูุชู ุณูุชู ุฎุตููุง.
-   **`HR_AppliedPenalty`**: ูุฌูุจ ุงูุนููุจุงุช ุงููุงููุฉ ุงูุชู ุณูุชู ุฎุตููุง.
-   **`Employee`**: ูุฌูุจ ุงูุฑุงุชุจ ุงูุฃุณุงุณู ูุญุงูุฉ ุงูููุธู (`employmentStatus`).