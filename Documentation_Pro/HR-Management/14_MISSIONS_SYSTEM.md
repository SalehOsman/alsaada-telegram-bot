# โ๏ธ ูุธุงู ุงููุฃููุฑูุงุช - ุงูุชูุซูู ุงููุงูู
## Missions System - Complete Documentation

> **ุขุฎุฑ ุชุญุฏูุซ:** 7 ููููุจุฑ 2025  
> **ุงูุฅุตุฏุงุฑ:** 3.0  
> **ุงูุญุงูุฉ:** ูุธุงู ูุงูู ูุฌุงูุฒ ููุฅูุชุงุฌ

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#-ูุธุฑุฉ-ุนุงูุฉ)
2. [ุฏูุฑุฉ ุญูุงุฉ ุงููุฃููุฑูุฉ (Workflow)](#-ุฏูุฑุฉ-ุญูุงุฉ-ุงููุฃููุฑูุฉ)
3. [ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ](#-ุงููุธุงุฆู-ุงูุฑุฆูุณูุฉ)
   - [ุฅุถุงูุฉ ูุฃููุฑูุฉ ุฌุฏูุฏุฉ](#1-ุฅุถุงูุฉ-ูุฃููุฑูุฉ-ุฌุฏูุฏุฉ)
   - [ุนุฑุถ ุงููุฃููุฑูุงุช](#2-ุนุฑุถ-ุงููุฃููุฑูุงุช)
   - [ุชุณุฌูู ุงูุนูุฏุฉ ูู ุงููุฃููุฑูุฉ](#3-ุชุณุฌูู-ุงูุนูุฏุฉ-ูู-ุงููุฃููุฑูุฉ)
4. [ุงูุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู](#-ุงูุชูุงูู-ูุน-ุงูุฃูุธูุฉ-ุงูุฃุฎุฑู)
5. [ุงููููุงุช ุงูุจุฑูุฌูุฉ ุงููุฑุชุจุทุฉ](#-ุงููููุงุช-ุงูุจุฑูุฌูุฉ-ุงููุฑุชุจุทุฉ)
6. [ุงูุฌุฏุงูู ุงููุฑุชุจุทุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช](#-ุงูุฌุฏุงูู-ุงููุฑุชุจุทุฉ-ุจูุงุนุฏุฉ-ุงูุจูุงูุงุช)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงููุฃููุฑูุงุช ูู ูุธุงู ูุชุฎุตุต ูุฅุฏุงุฑุฉ ูุชูุธูู ููุงู ุงูุนูู ุงูุชู ุชุชู ุฎุงุฑุฌ ุงูููุฑ ุงูุฑุฆูุณู ููุดุฑูุฉ. ูุชูุญ ุงููุธุงู ุชุณุฌูู ุงููุฃููุฑูุงุชุ ููุชุงุจุนุฉ ุญุงูุฉ ุงูููุธูููุ ูุชุณุฌูู ุนูุฏุชููุ ููุง ูููุฑ ุฑุคูุฉ ูุงุถุญุฉ ุญูู ุญุฑูุฉ ุงูููุธููู ูุชูุงุฌุฏูู.

### โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:

- โ **ุชุณุฌูู ุฏููู:** ุชุณุฌูู ุฌููุน ุชูุงุตูู ุงููุฃููุฑูุฉ (ุงููุฌูุฉุ ุงูุบุฑุถุ ุงูุชูุงุฑูุฎ).
- ๐ **ุชุชุจุน ุงูุญุงูุฉ:** ุชุญุฏูุซ ุญุงูุฉ ุงูููุธู ุชููุงุฆููุง ุฅูู `ON_MISSION` ุนูุฏ ุจุฏุก ุงููุฃููุฑูุฉ.
- ๐ **ูุชุงุจุนุฉ ุงูุนูุฏุฉ:** ูุธุงู ูุชุณุฌูู ุชุงุฑูุฎ ุงูุนูุฏุฉ ุงููุนูู ูุญุณุงุจ ุฃู ุชุฃุฎูุฑ.
- ๐ **ุชูุงุฑูุฑ ุดุงููุฉ:** ุฅููุงููุฉ ุนุฑุถ ุณุฌู ุงููุฃููุฑูุงุช ููู ููุธู ุฃู ููุดุฑูุฉ ุจุฃููููุง.

---

## ๐ ุฏูุฑุฉ ุญูุงุฉ ุงููุฃููุฑูุฉ (Workflow)

```mermaid
graph TD
    A[ุฅุถุงูุฉ ูุฃููุฑูุฉ ุฌุฏูุฏุฉ] --> B{ุงูุญุงูุฉ: ูุนุชูุฏุฉ (Approved)};
    B --> C[ุชุญุฏูุซ ุญุงูุฉ ุงูููุธู ุฅูู 'ON_MISSION'];
    C --> D[ุงูููุธู ูุฐูุจ ูููุฃููุฑูุฉ];
    D --> E[ุชุณุฌูู ุงูุนูุฏุฉ ูู ุงููุฃููุฑูุฉ];
    E --> F{ูู ุชุฃุฎุฑุ};
    F -- ูุง --> G[ุงูุชููุช ุจูุฌุงุญ];
    F -- ูุนู --> H[ุชุณุฌูู ุฃูุงู ุงูุชุฃุฎูุฑ];
    G --> I[ุชุญุฏูุซ ุญุงูุฉ ุงูููุธู ุฅูู 'ACTIVE'];
    H --> I;
```

---

## โ๏ธ ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ

### 1. ุฅุถุงูุฉ ูุฃููุฑูุฉ ุฌุฏูุฏุฉ

**ุงูููู:** `missions-add.handler.ts`

-   **ุงูุฎุทูุงุช:**
    1.  ูุฎุชุงุฑ ุงููุฏูุฑ "ุฅุถุงูุฉ ูุฃููุฑูุฉ ุฌุฏูุฏุฉ".
    2.  ูุฎุชุงุฑ ุงูููุธู ูู ูุงุฆูุฉ ุงูููุธููู ุงููุดุทูู.
    3.  ููุฏุฎู ูุฌูุฉ ุงููุฃููุฑูุฉ (ูุต ุญุฑ).
    4.  ููุฏุฎู ุงูุบุฑุถ ูู ุงููุฃููุฑูุฉ (ูุต ุญุฑ).
    5.  ูุณุชุฎุฏู ุงูุชูููู ุงูุชูุงุนูู ูุงุฎุชูุงุฑ ุชุงุฑูุฎู ุงูุจุฏุก ูุงูููุงูุฉ.
    6.  ุจุนุฏ ุงูุชุฃููุฏุ ูุชู ุฅูุดุงุก ุณุฌู ูู `HR_EmployeeMission` ูุชุญุฏูุซ ุญุงูุฉ ุงูููุธู.

-   **ุงูุชุฃุซูุฑ ุงูุชููุงุฆู:**
    -   ุนูุฏ ุญูุธ ุงููุฃููุฑูุฉุ ูุชู ุชุญุฏูุซ ุณุฌู ุงูููุธู ูู ุฌุฏูู `Employee`:
        -   `isOnMission` = `true`
        -   `currentMissionId` = ID ุงููุฃููุฑูุฉ ุงูุฌุฏูุฏุฉ
        -   `employmentStatus` = `ON_MISSION`

### 2. ุนุฑุถ ุงููุฃููุฑูุงุช

**ุงููููุงุช:** `missions-list.handler.ts`, `missions-employee.handler.ts`

-   **ูุงุฆูุฉ ุงููุฃููุฑูุงุช ุงููุดุทุฉ (`missions-list.handler.ts`):**
    -   ุชุนุฑุถ ุฌููุน ุงูููุธููู ุงูููุฌูุฏูู ุญุงูููุง ูู ูุฃููุฑูุฉ.
    -   ุชููุฑ ุงุฎุชุตุงุฑูุง ุณุฑูุนูุง ูุชุณุฌูู ุนูุฏุชูู.

-   **ุณุฌู ูุฃููุฑูุงุช ุงูููุธู (`missions-employee.handler.ts`):**
    -   ูููู ุงููุตูู ุฅูููุง ูู ุจุทุงูุฉ ุงูููุธู.
    -   ุชุนุฑุถ ุชุงุฑูุฎูุง ูุงููุงู ูุฌููุน ุงููุฃููุฑูุงุช ุงูุณุงุจูุฉ ูุงูุญุงููุฉ ููููุธู ุงููุญุฏุฏ.

### 3. ุชุณุฌูู ุงูุนูุฏุฉ ูู ุงููุฃููุฑูุฉ

**ุงูููู:** `missions-return.handler.ts`

-   **ุงูุฎุทูุงุช:**
    1.  ูุฎุชุงุฑ ุงููุฏูุฑ "ุชุณุฌูู ุนูุฏุฉ ูู ูุฃููุฑูุฉ".
    2.  ูุฎุชุงุฑ ุงูููุธู ูู ูุงุฆูุฉ ุงูููุธููู ุงูููุฌูุฏูู ูู ูุฃููุฑูุฉ.
    3.  ููุฏุฎู ุชุงุฑูุฎ ุงูุนูุฏุฉ ุงููุนูู.
    4.  ูููู ุงููุธุงู ุจููุงุฑูุฉ ุชุงุฑูุฎ ุงูุนูุฏุฉ ุงููุนูู ุจุชุงุฑูุฎ ุงูููุงูุฉ ุงููุชููุน ููุญุณุจ `delayDays` ุฅุฐุง ูุฌุฏ ุชุฃุฎูุฑ.

-   **ุงูุชุฃุซูุฑ ุงูุชููุงุฆู:**
    -   ุนูุฏ ุชุณุฌูู ุงูุนูุฏุฉุ ูุชู ุชุญุฏูุซ ุณุฌู ุงูููุธู:
        -   `isOnMission` = `false`
        -   `currentMissionId` = `null`
        -   `employmentStatus` = `ACTIVE` (ุฅุฐุง ูู ููู ูู ุฅุฌุงุฒุฉ ุฃู ููููู).

---

## ๐ ุงูุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู

-   **ูุธุงู ุงูุฅุฌุงุฒุงุช:** ุญุงูุฉ `ON_MISSION` ุชููุน ุชุณุฌูู ุงูููุธู ูู ุฅุฌุงุฒุฉ ุฌุฏูุฏุฉ ุฎูุงู ููุณ ุงููุชุฑุฉุ ูุงูุนูุณ ุตุญูุญ.
-   **ูุธุงู ุงูุญุถูุฑ:** ูููู ุงุณุชุฎุฏุงู ุจูุงูุงุช ุงููุฃููุฑูุงุช ูุชุจุฑูุฑ ุนุฏู ูุฌูุฏ ุงูููุธู ูู ุงูููุฑ ุงูุฑุฆูุณู.
-   **ูุธุงู ุงูุฑูุงุชุจ:** ุนูู ุงูุฑุบู ูู ุฃู ุงููุธุงู ุงูุญุงูู ูุง ูุฑุจุท ุจุฏูุงุช ุงููุฃููุฑูุงุช ุจุดูู ูุจุงุดุฑุ ูููู ุชูุณูุนู ูุณุชูุจูุงู ูุฅุถุงูุฉ "ุจุฏู ูุฃููุฑูุฉ" ูุชู ุตุฑูู ูุน ุงูุฑุงุชุจ ุจูุงุกู ุนูู ุฃูุงู ุงููุฃููุฑูุฉ ุงููุณุฌูุฉ.
-   **ูุธุงู ุงูุนููุจุงุช:** ูููู ุฑุจุท ุงูุชุฃุฎูุฑ ูู ุงูุนูุฏุฉ ูู ุงููุฃููุฑูุฉ ุจูุธุงู ุงูุนููุจุงุช (ุจุดูู ูุดุงุจู ูุชุฃุฎูุฑ ุงูุฅุฌุงุฒุงุช) ูู ุชุญุฏูุซุงุช ูุณุชูุจููุฉ.

---

## ๐ ุงููููุงุช ุงูุจุฑูุฌูุฉ ุงููุฑุชุจุทุฉ

| ุงูููู | ุงููุตู |
|---|---|
| `missions.handler.ts` | ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ููุธุงู ุงููุฃููุฑูุงุช. |
| `missions-add.handler.ts` | ูููุฐุฌ ุฅุถุงูุฉ ูุฃููุฑูุฉ ุฌุฏูุฏุฉ. |
| `missions-list.handler.ts` | ุนุฑุถ ูุงุฆูุฉ ุงููุฃููุฑูุงุช ุงููุดุทุฉ ุญุงูููุง. |
| `missions-employee.handler.ts` | ุนุฑุถ ุณุฌู ุงููุฃููุฑูุงุช ูููุธู ูุนูู. |
| `missions-return.handler.ts` | ูุงุฌูุฉ ุชุณุฌูู ุงูุนูุฏุฉ ูู ุงููุฃููุฑูุฉ. |

---

## ๐๏ธ ุงูุฌุฏุงูู ุงููุฑุชุจุทุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

-   **`HR_EmployeeMission`**: ุงูุฌุฏูู ุงูุฑุฆูุณู ุงูุฐู ูุฎุฒู ุฌููุน ุชูุงุตูู ุงููุฃููุฑูุงุช.
    -   **ุญููู ูููุฉ:** `destination`, `purpose`, `startDate`, `endDate`, `actualReturnDate`, `delayDays`, `status`.
-   **`Employee`**: ูุชุฃุซุฑ ูุจุงุดุฑุฉ ุจุชุบููุฑ ุงูุญููู `isOnMission`, `currentMissionId`, ู `employmentStatus`.