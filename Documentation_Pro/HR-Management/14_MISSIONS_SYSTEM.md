# 14. نظام المأموريات (Missions System)

---

## مقدمة

نظام المأموريات يتيح إدارة جميع أنواع المأموريات (تنفيذ مهام، عمل خارجي)، مع دعم البدلات، تسجيل العودة، والتقارير التفصيلية.

---

## الأهداف الرئيسية للنظام
- إدارة المأموريات بأنواعها للموظفين.
- دعم تسجيل العودة وتطبيق البدلات.
- تصدير تقارير المأموريات.

---

## الهيكل العام للنظام

- **Handlers رئيسية:**
  - missions.handler.ts
  - missions-add.handler.ts
  - missions-list.handler.ts
  - missions-employee.handler.ts
  - missions-return.handler.ts
- **الجداول المرتبطة:**
  - HR_EmployeeMission
- **Enums:**
  - MissionType

---

## 1. إدارة المأموريات (Missions Management)

### الوظيفة:
- إضافة، تعديل، حذف مأمورية لأي موظف.
- تحديد نوع المأمورية (تنفيذ مهمة، عمل خارجي).
- تحديد المدة، الموقع، الغرض.

### السيناريو:
1. اختيار الموظف.
2. تحديد نوع المأمورية والفترة والموقع.
3. حفظ المأمورية.

### مثال واجهة برمجية:
```
[إضافة مأمورية]
- الموظف: أحمد علي
- النوع: تنفيذ مهمة
- من: 2025-11-15
- إلى: 2025-11-18
- الموقع: فرع جدة
- الغرض: تركيب أجهزة
[حفظ]
```

---

## 2. تسجيل العودة من المأمورية (Mission Return)

### الوظيفة:
- تسجيل عودة الموظف من المأمورية.
- حساب التأخير أو الغياب في حال العودة المتأخرة.
- تطبيق العقوبات أو المكافآت تلقائياً.

### السيناريو:
1. اختيار المأمورية.
2. تسجيل تاريخ العودة الفعلي.
3. النظام يتحقق من التأخير ويطبق الإجراء المناسب.

### مثال واجهة برمجية:
```
[تسجيل العودة]
- الموظف: أحمد علي
- تاريخ العودة المتوقع: 2025-11-18
- تاريخ العودة الفعلي: 2025-11-19
- التأخير: يوم
- الإجراء: خصم يوم
[حفظ]
```

---

## 3. تقارير المأموريات (Missions Reports)

### الوظيفة:
- تصدير تقارير مفصلة عن جميع المأموريات.
- فلترة حسب الموظف، النوع، الفترة.

### السيناريو:
1. تحديد الموظف أو الفترة أو النوع.
2. تصدير التقرير إلى Excel أو PDF.

### مثال واجهة برمجية:
```
[تقرير المأموريات]
- الموظف: أحمد علي
- الفترة: 2025-01-01 إلى 2025-11-01
- مجموع المأموريات: 5
- التأخيرات: 1
[تصدير PDF]
```

---

## 4. الجداول المرتبطة (Database Tables)

### HR_EmployeeMission
- جميع المأموريات المسجلة.
- الحقول: id, employeeId, type, fromDate, toDate, location, purpose, status, createdBy, createdAt

---

## 5. أفضل الممارسات
- مراجعة جميع المأموريات بشكل دوري.
- تفعيل سجل التغييرات لكل مأمورية.
- تصدير تقارير المأموريات شهرياً.

---

## 6. ملخص

نظام المأموريات يوفر أتمتة كاملة لإدارة جميع أنواع المأموريات، مع دعم البدلات، تسجيل العودة، والتقارير التفصيلية.

---

**آخر تحديث:** 7 نوفمبر 2025
