# 15. نظام التقارير المخصصة (Custom Reports System)

---

## مقدمة

نظام التقارير المخصصة يتيح استخراج تقارير شاملة أو متقدمة عن الموظفين، الإجازات، الرواتب، السلف، الحضور، وغيرها، مع دعم التصدير والتحليل الإحصائي.

---

## الأهداف الرئيسية للنظام
- استخراج تقارير شاملة أو متقدمة عن جميع الأنظمة.
- دعم الفلترة والتحليل الإحصائي.
- تصدير التقارير بعدة صيغ.

---

## الهيكل العام للنظام

- **Handlers رئيسية:**
  - custom-reports-main.handler.ts
  - custom-reports-employee.handler.ts
  - custom-reports-advanced.handler.ts
- **الجداول المرتبطة:**
  - HR_ReportTemplate
  - HR_ReportLog

---

## 1. تقارير الموظفين (Employee Reports)

### الوظيفة:
- استخراج تقرير شامل لموظف (إجازات، سلف، رواتب، حضور/غياب).
- تصدير التقرير بعدة صيغ.

### السيناريو:
1. اختيار الموظف.
2. تحديد نوع التقرير.
3. تصدير التقرير.

### مثال واجهة برمجية:
```
[تقرير الموظف]
- الموظف: أحمد علي
- الإجازات: 18 يوم
- السلف: 5000
- الرواتب: 12
- الحضور: 95%
[تصدير PDF]
```

---

## 2. التقارير المتقدمة (Advanced Reports)

### الوظيفة:
- استخراج تقارير مخصصة حسب الفترة، القسم، النوع.
- دعم التحليل الإحصائي والمقارنات.

### السيناريو:
1. تحديد الفترة أو القسم أو النوع.
2. اختيار نوع التحليل (إجمالي/مقارن).
3. تصدير التقرير.

### مثال واجهة برمجية:
```
[تقرير متقدم]
- الفترة: 2025-01-01 إلى 2025-11-01
- القسم: المالية
- الإجازات: 120 يوم
- الرواتب: 1,200,000
[تصدير Excel]
```

---

## 3. الجداول المرتبطة (Database Tables)

### HR_ReportTemplate
- قوالب التقارير المخصصة.
- الحقول: id, name, fields, filters, createdBy, createdAt

### HR_ReportLog
- سجل استخراج التقارير.
- الحقول: id, reportId, generatedBy, generatedAt, params

---

## 4. أفضل الممارسات
- مراجعة قوالب التقارير بشكل دوري.
- تفعيل سجل استخراج التقارير.
- تصدير التقارير شهرياً للإدارة.

---

## 5. ملخص

نظام التقارير المخصصة يوفر أتمتة كاملة لاستخراج وتحليل جميع أنواع التقارير، مع دعم التصدير والتحليل الإحصائي.

---

**آخر تحديث:** 7 نوفمبر 2025
