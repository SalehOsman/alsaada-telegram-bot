# 10. نظام العقوبات والإيقافات (Penalties & Suspensions System)

---

## مقدمة

نظام العقوبات والإيقافات هو أحد الأنظمة الجوهرية في إدارة الموارد البشرية، ويهدف إلى إدارة جميع أنواع العقوبات التأديبية للموظفين، بما في ذلك التأخيرات، الغيابات، والإيقافات المؤقتة، مع سجل تاريخي كامل وسياسات مرنة قابلة للتخصيص.

---

## الأهداف الرئيسية للنظام
- أتمتة مراجعة واعتماد العقوبات التأديبية.
- تطبيق سياسات عقوبات ديناميكية حسب نوع المخالفة وتكرارها.
- إدارة حالات الإيقاف المؤقت ورفع الإيقاف مع أو بدون عقوبة بديلة.
- توفير سجل تاريخي كامل لكل موظف.
- تصدير تقارير العقوبات والإيقافات للإدارة العليا.

---

## الهيكل العام للنظام

- **Handlers رئيسية:**
  - penalties.handler.ts
  - lift-suspensions.handler.ts
- **الجداول المرتبطة:**
  - HR_DelayPenaltyPolicy
  - HR_AppliedPenalty
  - HR_Suspension
  - HR_PenaltyAuditLog
- **Enums:**
  - DelayPenaltyType
  - PenaltyStatus

---

## 1. مراجعة العقوبات المعلقة (Pending Penalties)

### الوظيفة:
- عرض جميع العقوبات التي تنتظر الاعتماد من الإدارة.
- إمكانية اعتماد أو رفض العقوبة مع توضيح السبب.

### السيناريو:
1. النظام يعرض قائمة العقوبات المعلقة (تأخير، غياب، إلخ).
2. المدير يراجع تفاصيل كل عقوبة (الموظف، التاريخ، نوع المخالفة، السياسة المطبقة).
3. يمكن للمدير:
   - اعتماد العقوبة (تنتقل للحالة "معتمدة")
   - رفض العقوبة (مع توضيح السبب)
   - تعديل نوع العقوبة أو قيمتها حسب الصلاحيات

### مثال واجهة برمجية:
```
[قائمة العقوبات المعلقة]
- الموظف: أحمد علي
- نوع المخالفة: تأخير
- التاريخ: 2025-11-01
- السياسة: خصم يوم
- الحالة: PENDING
[اعتماد] [رفض] [تعديل]
```

---

## 2. سجل العقوبات التاريخي (Penalty History)

### الوظيفة:
- عرض جميع العقوبات السابقة للموظف مع تفاصيل كل عقوبة.
- إمكانية تصفية السجل حسب الفترة أو نوع العقوبة.

### السيناريو:
1. اختيار الموظف.
2. عرض جدول بجميع العقوبات (التاريخ، النوع، القيمة، الحالة، من اعتمدها).
3. تصدير السجل إلى Excel أو PDF.

### مثال واجهة برمجية:
```
[سجل العقوبات - الموظف: أحمد علي]
| التاريخ      | النوع    | القيمة | الحالة   | المعتمد      |
|--------------|----------|--------|----------|--------------|
| 2025-11-01   | تأخير    | خصم يوم| معتمدة   | مدير الموارد |
| 2025-10-15   | غياب     | خصم يومين| مرفوضة | مدير القسم  |
```

---

## 3. إدارة سياسات العقوبات (Penalty Policies)

### الوظيفة:
- تعريف وتعديل سياسات العقوبات (عدد مرات التكرار، نوع العقوبة، القيمة).
- ربط كل سياسة بنوع مخالفة محدد (تأخير، غياب، إلخ).

### السيناريو:
1. عرض جميع السياسات الحالية.
2. إضافة سياسة جديدة أو تعديل سياسة قائمة.
3. تحديد عدد مرات التكرار قبل تصعيد العقوبة.

### مثال واجهة برمجية:
```
[سياسات العقوبات]
- نوع المخالفة: تأخير
- التكرار الأول: إنذار شفهي
- التكرار الثاني: خصم يوم
- التكرار الثالث: إيقاف يومين
[إضافة سياسة] [تعديل] [حذف]
```

---

## 4. رفع الإيقافات (Lifting Suspensions)

### الوظيفة:
- عرض جميع الموظفين الموقوفين حاليًا.
- إمكانية رفع الإيقاف مع أو بدون تطبيق عقوبة بديلة.
- تسجيل سبب رفع الإيقاف وتوثيقه في السجل.

### السيناريو:
1. عرض قائمة الموظفين الموقوفين (الاسم، رقم الإجازة، تاريخ الإيقاف، السبب).
2. اختيار موظف لرفع الإيقاف.
3. تحديد ما إذا كان سيتم تطبيق عقوبة بديلة (خصم، إنذار، إلخ).
4. تسجيل سبب رفع الإيقاف.

### مثال واجهة برمجية:
```
[الموظفون الموقوفون]
- أحمد علي | إجازة رقم: 123 | من: 2025-10-20 | إلى: 2025-11-05
[رفع الإيقاف] [تطبيق عقوبة بديلة]
```

---

## 5. تصدير تقارير العقوبات والإيقافات

### الوظيفة:
- تصدير جميع العقوبات أو الإيقافات لفترة محددة إلى Excel أو PDF.
- تقارير مخصصة حسب القسم أو الموظف أو نوع العقوبة.

### السيناريو:
1. تحديد الفترة أو الموظف أو القسم.
2. اختيار نوع التقرير (عقوبات، إيقافات، كلاهما).
3. تصدير التقرير.

### مثال واجهة برمجية:
```
[تصدير التقارير]
- الفترة: 2025-10-01 إلى 2025-11-01
- النوع: جميع العقوبات
[تصدير Excel] [تصدير PDF]
```

---

## 6. الجداول المرتبطة (Database Tables)

### HR_DelayPenaltyPolicy
- تعريف سياسات العقوبات حسب نوع المخالفة وعدد مرات التكرار.
- الحقول: id, violationType, repeatCount, penaltyType, penaltyValue, isActive

### HR_AppliedPenalty
- جميع العقوبات المطبقة على الموظفين.
- الحقول: id, employeeId, date, type, value, status, approvedBy, approvedAt, notes

### HR_Suspension
- حالات الإيقاف المؤقت للموظفين.
- الحقول: id, employeeId, leaveId, fromDate, toDate, reason, liftedBy, liftedAt, alternativePenalty

### HR_PenaltyAuditLog
- سجل كامل بجميع التعديلات على العقوبات.
- الحقول: id, penaltyId, action, oldValue, newValue, changedBy, changedAt

---

## 7. أفضل الممارسات
- مراجعة السياسات بشكل دوري وتحديثها حسب متطلبات العمل.
- تفعيل سجل التدقيق (Audit Log) لكل عملية تعديل أو اعتماد.
- ربط النظام بتنبيهات تلقائية للمديرين عند وجود عقوبات معلقة.
- تصدير التقارير بشكل دوري للإدارة العليا.

---

## 8. ملخص

نظام العقوبات والإيقافات يوفر أتمتة كاملة لإدارة العقوبات التأديبية، مع مرونة عالية في السياسات، وسجل تاريخي دقيق، وواجهات سهلة للاعتماد والتقارير. يوصى بتوثيق جميع العمليات وربطها مع أنظمة الرواتب والإجازات لتحقيق تكامل كامل في إدارة الموارد البشرية.

---

**آخر تحديث:** 7 نوفمبر 2025
