# ๐ฆ ูุธุฑุฉ ุนุงูุฉ - ุฅุฏุงุฑุฉ ูุณู ุงููุฎุงุฒู

## ๐ ุงููุญุชููุงุช
1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงููููู ุงูุนุงู](#ุงููููู-ุงูุนุงู)
3. [ุงููุธุงุฆู ุงููุชุงุญุฉ](#ุงููุธุงุฆู-ุงููุชุงุญุฉ)
4. [ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ](#ุงูุชูููุงุช-ุงููุณุชุฎุฏูุฉ)
5. [ููุฎุต ุงููููุงุช](#ููุฎุต-ุงููููุงุช)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู **ุฅุฏุงุฑุฉ ูุณู ุงููุฎุงุฒู** ูู ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงููุฎุฒูู ูุงูุฃุตูู ูู ุชุทุจูู Telegram Bot. ุชู ุชุตูููู ุจุงุชุจุงุน ููุณ ูููุฌูุฉ **ูุณู ุดุฆูู ุงูุนุงูููู** ูุถูุงู ุงูุชูุงุณู ูุงูุฌูุฏุฉ.

### ุงูุฃูุฏุงู ุงูุฑุฆูุณูุฉ
- โ ุฅุฏุงุฑุฉ ูุฎุงุฒู ูุชุนุฏุฏุฉ (ูุทุน ุงูุบูุงุฑุ ุงูุฒููุชุ ุงูุณููุงุฑุ ุงูุนุฏุฏ ูุงูุฃุฏูุงุช)
- โ ูุธุงู ุตูุงุญูุงุช ูุชูุฏู (ุตูุงุญูุงุช ุงููุณู + ุตูุงุญูุงุช ุงููุธุงุฆู ุงููุฑุนูุฉ)
- โ ุฅุฏุงุฑุฉ ุงููุณุคูููู (ูุณุคููู ุงููุณู + ูุณุคููู ุงููุธุงุฆู)
- โ ุงูุชุญูู ุงููุงูู ูู ุงููุณู (ุชูุนูู/ุชุนุทูู + ุฅุญุตุงุฆูุงุช)
- โ ุชุทุงุจู ูุงูู ูุน ูุนุงููุฑ ูุธุงู HR Management

---

## ๐๏ธ ุงููููู ุงูุนุงู

```
inventory-management/
โโโ config.ts                          # ุฅุนุฏุงุฏุงุช ุงููุณู ูุงููุธุงุฆู ุงููุฑุนูุฉ
โโโ index.ts                          # ุชุณุฌูู ุฌููุน ุงูู handlers
โโโ handlers/
    โโโ inventory-main.handler.ts     # Handler ุงูุฑุฆูุณู ูููุณู
    โโโ sub-features.handler.ts       # Handler ูููุธุงุฆู ุงููุฑุนูุฉ (4 ูุฎุงุฒู)
    โโโ section-management.handler.ts # Handler ุฅุฏุงุฑุฉ ุงููุณู ุงููุงูู (~1400 ุณุทุฑ)
    โโโ management.handler.ts         # Handler ูุฏูู (ุณูุชู ุฅุฒุงูุชู ูุงุญูุงู)
```

### ุงูุชุณูุณู ุงููุฑูู
```
๐ฆ ุงููุฎุงุฒู (Department)
โโโ โ๏ธ ูุฎุฒู ูุทุน ุงูุบูุงุฑ (SubFeature)
โโโ ๐ข๏ธ ูุฎุฒู ุงูุฒููุช ูุงูุดุญูู (SubFeature)
โโโ โฝ ูุฎุฒู ุงูุณููุงุฑ (SubFeature)
โโโ ๐๏ธ ูุฎุฒู ุงูุนุฏุฏ ูุงูุฃุฏูุงุช (SubFeature)
โโโ โ๏ธ ุฅุฏุงุฑุฉ ูุณู ุงููุฎุงุฒู (SubFeature - SUPER_ADMIN ููุท)
    โโโ ๐ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
    โ   โโโ ุชุญุฏูุฏ ุตูุงุญูุฉ ุงููุณู
    โ   โโโ ุชุญุฏูุฏ ุตูุงุญูุงุช ุงููุธุงุฆู ุงููุฑุนูุฉ
    โ   โโโ ุนุฑุถ ุฌููุน ุงูุตูุงุญูุงุช
    โโโ ๐ฅ ุฅุฏุงุฑุฉ ุงููุณุคูููู
    โ   โโโ ูุณุคููู ุงููุณู
    โ   โ   โโโ ุนุฑุถ ุงููุงุฆูุฉ
    โ   โ   โโโ ุฅุถุงูุฉ ูุณุคูู
    โ   โ   โโโ ุฅุฒุงูุฉ ูุณุคูู
    โ   โโโ ูุณุคููู ุงููุธุงุฆู
    โ       โโโ ุนุฑุถ ุงููุงุฆูุฉ
    โ       โโโ ุฅุถุงูุฉ ูุณุคูู
    โ       โโโ ุฅุฒุงูุฉ ูุณุคูู
    โโโ โก ุงูุชุญูู ูุงูุฅุนุฏุงุฏุงุช
        โโโ ุชูุนูู/ุชุนุทูู ุงููุณู
        โโโ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
```

---

## ๐ฏ ุงููุธุงุฆู ุงููุชุงุญุฉ

### 1๏ธโฃ ุงููุฎุงุฒู ุงููุฑุนูุฉ (ููุฏ ุงูุฅูุดุงุก)
| ุงููุฎุฒู | ุงูุฑูุฒ | ุงูุญุงูุฉ |
|--------|------|--------|
| ูุทุน ุงูุบูุงุฑ | `inv:spare-parts` | ๐ง ููุฏ ุงูุฅูุดุงุก |
| ุงูุฒููุช ูุงูุดุญูู | `inv:oils-greases` | ๐ง ููุฏ ุงูุฅูุดุงุก |
| ุงูุณููุงุฑ | `inv:diesel` | ๐ง ููุฏ ุงูุฅูุดุงุก |
| ุงูุนุฏุฏ ูุงูุฃุฏูุงุช | `inv:tools-equipment` | ๐ง ููุฏ ุงูุฅูุดุงุก |

### 2๏ธโฃ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช โ
- **ุชุญุฏูุฏ ุตูุงุญูุฉ ุงููุณู**: ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃุฏูู ููุฑุชุจุฉ ูููุตูู ูููุณู ุจุงููุงูู
- **ุชุญุฏูุฏ ุตูุงุญูุงุช ุงููุธุงุฆู**: ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃุฏูู ููู ูุธููุฉ ูุฑุนูุฉ
- **ุนุฑุถ ุงูุตูุงุญูุงุช**: ุนุฑุถ ุฌููุน ุงูุตูุงุญูุงุช ุงูุญุงููุฉ ุจุดูู ููุธู

**ุงูุฑุชุจ ุงููุชุงุญุฉ:**
- ๐ด ุณูุจุฑ ุฃุฏูู (SUPER_ADMIN)
- ๐ข ุฃุฏูู (ADMIN)
- ๐ก ูุดุฑู (MODERATOR)
- ๐ต ูุณุชุฎุฏู (USER)
- โช ุถูู (GUEST)

### 3๏ธโฃ ุฅุฏุงุฑุฉ ุงููุณุคูููู โ
**ูุณุคูู ุงููุณู:**
- ูุณุชุทูุน ุงููุตูู ูุฌููุน ุงููุธุงุฆู ุงููุฑุนูุฉ (ูุง ุนุฏุง ุงููุธุงุฆู ุงููุญุฏุฏุฉ ูู SUPER_ADMIN ููุท)
- ูุชู ุชุฎุฒููู ูู ุฌุฏูู `DepartmentAdmin`

**ูุณุคูู ุงููุธููุฉ:**
- ูุณุชุทูุน ุงููุตูู ููุธููุฉ ูุญุฏุฏุฉ ููุท
- ูุชู ุชุฎุฒููู ูู ุฌุฏูู `SubFeatureAdmin`

### 4๏ธโฃ ุงูุชุญูู ูุงูุฅุนุฏุงุฏุงุช โ
- **ุชูุนูู/ุชุนุทูู ุงููุณู**: ุงูุชุญูู ูู ุญุงูุฉ ุงููุณู ุจุงููุงูู
- **ุงูุฅุญุตุงุฆูุงุช ุงูููุฑูุฉ**:
  - ุนุฏุฏ ูุณุคููู ุงููุณู
  - ุนุฏุฏ ุงููุธุงุฆู ุงููุฑุนูุฉ
  - ุนุฏุฏ ูุณุคููู ุงููุธุงุฆู
  - ุงูุญุฏ ุงูุฃุฏูู ููุฑุชุจุฉ
  - ุงูุญุงูุฉ ุงูุญุงููุฉ

---

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### ุงูุจููุฉ ุงูุชุญุชูุฉ
```typescript
// Framework
Grammy v1.35.0           // Telegram Bot Framework
Prisma ORM v6.17.1      // Database Management
TypeScript + ES Modules // Type Safety

// Design Patterns
Composer Pattern        // Handler Registration
Callback Query Routing  // Regex-based Pattern Matching
Map-based Deduplication // Prevent Duplicate Displays
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช (SQLite + Prisma)
```prisma
model DepartmentConfig {
  id          Int      @id @default(autoincrement())
  code        String   @unique
  name        String
  enabled     Boolean  @default(true)
  minRole     String   @default("ADMIN")
  // ... ุนูุงูุงุช ุฃุฎุฑู
}

model SubFeatureConfig {
  id              Int      @id @default(autoincrement())
  departmentCode  String
  name            String
  code            String   @unique
  minRole         String   @default("ADMIN")
  superAdminOnly  Boolean  @default(false)
  // ... ุนูุงูุงุช ุฃุฎุฑู
}

model DepartmentAdmin {
  id             Int      @id @default(autoincrement())
  userId         Int
  departmentCode String
  // ... ุนูุงูุงุช
}

model SubFeatureAdmin {
  id             Int      @id @default(autoincrement())
  userId         Int
  subFeatureId   Int
  // ... ุนูุงูุงุช
}
```

### ููุท Callback Data
ุชู ุงุนุชูุงุฏ ููุท ููุญุฏ ููู callbacks:

```typescript
// ุงูููุท ุงูุนุงู
menu:sub:{departmentCode}:{subFeatureId}

// ุฃูุซูุฉ ูุงูุนูุฉ
menu:sub:inventory-management:inv:spare-parts
menu:sub:inventory-management:inv:section-management

// ุงูุฃููุงุท ุงูุฏุงุฎููุฉ (ุจุนุฏ ุงูุฏุฎูู)
inv:section:permissions     // ูุงุฆูุฉ ุงูุตูุงุญูุงุช
inv:section:admins          // ูุงุฆูุฉ ุงููุณุคูููู
inv:section:control         // ุงูุชุญูู ูุงูุฅุนุฏุงุฏุงุช
inv:perm:set-dept-role      // ุชุญุฏูุฏ ุตูุงุญูุฉ ุงููุณู
inv:perm:dept:ADMIN         // ุงุฎุชูุงุฑ ุฑุชุจุฉ ูููุณู
```

---

## ๐ ููุฎุต ุงููููุงุช

### config.ts (~150 ุณุทุฑ)
**ุงููุธููุฉ:** ุชุนุฑูู ุงููุณู ูุงููุธุงุฆู ุงููุฑุนูุฉ ุงูุฎูุณ
- ุฅุนุฏุงุฏุงุช ุงููุณู ุงูุฑุฆูุณู
- 5 ูุธุงุฆู ูุฑุนูุฉ ุจุฃููุงุฏ ููุญุฏุฉ (inv:*)
- ุชุนุฑูู handlers ููู ูุธููุฉ

### index.ts (~20 ุณุทุฑ)
**ุงููุธููุฉ:** ุชุณุฌูู ุฌููุน ุงูู handlers
- ุชุฑุชูุจ ุงูุชุณุฌูู:
  1. `inventorySectionManagementHandler` (ุฃููููุฉ ุนุงููุฉ - SUPER_ADMIN)
  2. `inventoryMainHandler`
  3. `inventorySubFeaturesHandler`
  4. `inventoryManagementHandler`

### sub-features.handler.ts (~30 ุณุทุฑ)
**ุงููุธููุฉ:** ูุนุงูุฌุฉ ุงููุธุงุฆู ุงููุฑุนูุฉ ุงูุฃุฑุจุนุฉ
- 4 regex patterns ูููุฎุงุฒู ุงูุฃุฑุจุนุฉ
- ุฑุณุงูุฉ "ููุฏ ุงูุฅูุดุงุก" ูุคูุชุฉ
- ุณูุชู ุงุณุชุจุฏุงููุง ุจู handlers ูุฑุฏูุฉ ูุงุญูุงู

### section-management.handler.ts (~1400 ุณุทุฑ) โญ
**ุงููุธููุฉ:** ุงููุธุงู ุงููุงูู ูุฅุฏุงุฑุฉ ุงููุณู
- ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ (3 ุฃูุณุงู)
- ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช (3 ูุธุงุฆู + Map deduplication)
- ุฅุฏุงุฑุฉ ุงููุณุคูููู (6 ูุธุงุฆู)
- ุงูุชุญูู ูุงูุฅุนุฏุงุฏุงุช (3 ูุธุงุฆู)
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุชุญูู ูู ุงูุตูุงุญูุงุช

---

## ๐จ ุงููููุฒุงุช ุงูุฎุงุตุฉ

### 1. Map-based Deduplication
ุชู ุงุณุชุฎุฏุงู `Map` ูููุน ุชูุฑุงุฑ ุงูุนุฑุถ ูู ุญุงูุฉ ูุฌูุฏ ุณุฌูุงุช ููุฑุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```typescript
// ููุน ุงูุชูุฑุงุฑ ูู ุนุฑุถ ุงูุตูุงุญูุงุช
const uniqueSubFeatures = new Map<string, any>()
for (const sf of subFeatures) {
  if (!uniqueSubFeatures.has(sf.code)) {
    uniqueSubFeatures.set(sf.code, sf)
  }
}
```

### 2. Single Column Layout
ุชู ุชุทุจูู ุนุฑุถ ุงูุฃุฒุฑุงุฑ ุนููุฏูุงู (ุฒุฑ ูุงุญุฏ ูู ูู ุตู):

```typescript
// ูู welcome.ts
const singleColumnFeatures = ['hr-management', 'inventory-management']
maxButtonsPerRow: singleColumnFeatures.includes(featureId) ? 1 : 2
```

### 3. Custom Descriptions
ูุตู ูุฎุตุต ุจุฏูู ูุงุฆูุฉ ุงูุฃูุณุงู:

```typescript
if (featureId === 'inventory-management') {
  description = '๐ฆ **ุงููุฎุงุฒู**\n\nุฅุฏุงุฑุฉ ุดุงููุฉ ูููุฎุงุฒู ูุงูุฃุตูู\n\n๐ ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุงููุณู ุงููุทููุจ:'
}
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงูุนูุตุฑ | ุงูุนุฏุฏ |
|--------|------|
| ุฅุฌูุงูู ุงููููุงุช | 4 |
| ุฅุฌูุงูู ุงูุฃุณุทุฑ ุงูุจุฑูุฌูุฉ | ~1,600 |
| ุนุฏุฏ ุงููุธุงุฆู ุงููุฑุนูุฉ | 5 |
| ุนุฏุฏ ุงูู Handlers | 33 |
| ุนุฏุฏ ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช | 4 |
| ุฃููุงุท Callback ุงููุณุชุฎุฏูุฉ | 20+ |

---

## ๐ ูููุงุช ุงูุชูุซูู ุงูุฃุฎุฑู

1. [๐ ุงูุชุฏููุงุช ุงูุชูุตูููุฉ](./02-FLOWS.md) - ุฑุณููุงุช ุชุฏูู ูุงููุฉ ูุฌููุน ุงููุธุงุฆู
2. [๐ ุงููุดุงูู ูุงูุญููู](./03-PROBLEMS-AND-SOLUTIONS.md) - ุฌููุน ุงููุดุงูู ุงูุชู ุชู ููุงุฌูุชูุง ูุญููุง
3. [๐ ุฏููู ุงูุงุณุชุฎุฏุงู](./04-USER-GUIDE.md) - ุดุฑุญ ููุตู ูููููุฉ ุงุณุชุฎุฏุงู ูู ูุธููุฉ
4. [๐ง ุฏููู ุงููุทูุฑ](./05-DEVELOPER-GUIDE.md) - ูุนูููุงุช ุชูููุฉ ูููุทูุฑูู
5. [๐งช ุงูุงุฎุชุจุงุฑุงุช ูุงูุชุญูู](./06-TESTING.md) - ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ ูุงููุชุงุฆุฌ

---

## ๐ ูุนูููุงุช ุงูุฅุตุฏุงุฑ

- **ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 9 ููููุจุฑ 2025
- **ุงูุฅุตุฏุงุฑ:** 1.0.0
- **ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ (ุจุงุณุชุซูุงุก ุงููุฎุงุฒู ุงููุฑุนูุฉ ุงูุฃุฑุจุนุฉ)
- **ุขุฎุฑ ุชุญุฏูุซ:** 9 ููููุจุฑ 2025

---

## โ ูุงุฆูุฉ ุงููุฑุงุฌุนุฉ

- [x] ูููู ุงููููุงุช ูุงููุฌูุฏุงุช
- [x] config.ts ูุน ุงููุธุงุฆู ุงูุฎูุณ
- [x] Database initialization script
- [x] section-management.handler.ts ูุงูู
- [x] ูุธุงู ุงูุตูุงุญูุงุช (ูุณู + ูุธุงุฆู)
- [x] ูุธุงู ุงููุณุคูููู (ูุณู + ูุธุงุฆู)
- [x] ุงูุชุญูู ูุงูุฅุญุตุงุฆูุงุช
- [x] Map deduplication
- [x] Single column layout
- [x] Custom descriptions
- [x] Callback pattern matching
- [x] Error handling
- [x] Testing and validation
- [ ] ุงููุฎุงุฒู ุงููุฑุนูุฉ ุงูุฃุฑุจุนุฉ (ููุฏ ุงูุฅูุดุงุก)

---

**๐ ููุงุญุธุฉ:** ูุฐุง ุงูุชูุซูู ูุบุทู ุงููุธุงู ุงููุงูู ูุฅุฏุงุฑุฉ ูุณู ุงููุฎุงุฒู. ููุญุตูู ุนูู ุชูุงุตูู ุฅุถุงููุฉุ ูุฑุฌู ูุฑุงุฌุนุฉ ุงููููุงุช ุงูุฃุฎุฑู ูู ูุฐุง ุงููุฌูุฏ.
