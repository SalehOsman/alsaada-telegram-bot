# ğŸ”„ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© - Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†

## ğŸ“‹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
1. [Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ](#Ø§Ù„ØªØ¯ÙÙ‚-Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ)
2. [ØªØ¯ÙÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª](#ØªØ¯ÙÙ‚-Ø¥Ø¯Ø§Ø±Ø©-Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)
3. [ØªØ¯ÙÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†](#ØªØ¯ÙÙ‚-Ø¥Ø¯Ø§Ø±Ø©-Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†)
4. [ØªØ¯ÙÙ‚ Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª](#ØªØ¯ÙÙ‚-Ø§Ù„ØªØ­ÙƒÙ…-ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)
5. [ØªØ¯ÙÙ‚Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª](#ØªØ¯ÙÙ‚Ø§Øª-Ù‚Ø§Ø¹Ø¯Ø©-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

---

## ğŸ¯ Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ

### Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¥Ù„Ù‰ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚Ø³Ù…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ“‹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©      â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ‘¥ Ø´Ø¦ÙˆÙ† Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ†  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ“¦ Ø§Ù„Ù…Ø®Ø§Ø²Ù†        â”‚ â—„â”€â”€ Click
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ“¦ Ø§Ù„Ù…Ø®Ø§Ø²Ù†                            â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ âš™ï¸ Ù…Ø®Ø²Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ›¢ï¸ Ù…Ø®Ø²Ù† Ø§Ù„Ø²ÙŠÙˆØª ÙˆØ§Ù„Ø´Ø­ÙˆÙ…        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â›½ Ù…Ø®Ø²Ù† Ø§Ù„Ø³ÙˆÙ„Ø§Ø±                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ› ï¸ Ù…Ø®Ø²Ù† Ø§Ù„Ø¹Ø¯Ø¯ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ âš™ï¸ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†          â”‚ â—„â”€â”€ Click (SUPER_ADMIN ÙÙ‚Ø·)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â¬…ï¸ Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   âš™ï¸ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†                   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ” Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ âš¡ Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ”™ Ø±Ø¬ÙˆØ¹                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Callback Data Flow

```
User Click: "ğŸ“¦ Ø§Ù„Ù…Ø®Ø§Ø²Ù†"
    â†“
Callback: "menu:feature:inventory-management"
    â†“
Handler: welcome.ts (ÙŠØ¹ØªØ±Ø¶ Ø£ÙˆÙ„Ø§Ù‹)
    â†“
Check: isSingleColumn? â†’ Yes (inventory-management)
    â†“
Build Menu: maxButtonsPerRow = 1
    â†“
Custom Description: "Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø®Ø§Ø²Ù† ÙˆØ§Ù„Ø£ØµÙˆÙ„"
    â†“
Display: 5 buttons (vertical layout)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User Click: "âš™ï¸ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†"
    â†“
Callback: "menu:sub:inventory-management:inv:section-management"
    â†“
Handler: section-management.handler.ts
    â†“
Regex Match: /^menu:sub:inventory-management:inv:section-management$/
    â†“
Check: ctx.dbUser?.role === 'SUPER_ADMIN'?
    â”œâ”€ Yes â†’ Display Main Menu (3 options)
    â””â”€ No  â†’ "ğŸ”’ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ù…ØªØ§Ø­Ø© ÙÙ‚Ø· Ù„Ù„Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù†"
```

---

## ğŸ” ØªØ¯ÙÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ” Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª                 â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ” ØªØ­Ø¯ÙŠØ¯ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù‚Ø³Ù…      â”‚ â—„â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ âš™ï¸ ØªØ­Ø¯ÙŠØ¯ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØ¸Ø§Ø¦Ù   â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©  â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â¬…ï¸ Ø±Ø¬ÙˆØ¹                    â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ” ØªØ­Ø¯ÙŠØ¯ ØµÙ„Ø§Ø­ÙŠØ© Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†           â”‚
â”‚                                         â”‚
â”‚   Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ğŸŸ¢ Ø£Ø¯Ù…Ù†            â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ”´ Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù†                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸŸ¢ Ø£Ø¯Ù…Ù†     â”‚ ğŸŸ¡ Ù…Ø´Ø±Ù          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ”µ Ù…Ø³ØªØ®Ø¯Ù…                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â¬…ï¸ Ø±Ø¬ÙˆØ¹                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ (User selects role)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   âœ… Database Update                     â”‚
â”‚                                         â”‚
â”‚   UPDATE DepartmentConfig               â”‚
â”‚   SET minRole = 'MODERATOR'             â”‚
â”‚   WHERE code = 'inventory-management'   â”‚
â”‚                                         â”‚
â”‚   Alert: "âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù‚Ø³Ù…     â”‚
â”‚           Ø¥Ù„Ù‰: ğŸŸ¡ Ù…Ø´Ø±Ù"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
     Return to permissions menu
```

### Database Interaction - Set Department Role

```sql
-- Step 1: Fetch current role
SELECT minRole 
FROM DepartmentConfig 
WHERE code = 'inventory-management'

-- Step 2: User selects new role â†’ Display in UI
-- Step 3: Update database

UPDATE DepartmentConfig 
SET minRole = 'MODERATOR' 
WHERE code = 'inventory-management'

-- Step 4: Show confirmation alert
```

### ØªØ­Ø¯ÙŠØ¯ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙØ±Ø¹ÙŠØ©

```
Click: "âš™ï¸ ØªØ­Ø¯ÙŠØ¯ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØ¸Ø§Ø¦Ù"
    â†“
Query Database:
    SELECT id, name 
    FROM SubFeatureConfig 
    WHERE departmentCode = 'inventory-management'
    â†“
Display List:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ Ù…Ø®Ø²Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±             â”‚
â”‚  ğŸ›¢ï¸ Ù…Ø®Ø²Ù† Ø§Ù„Ø²ÙŠÙˆØª ÙˆØ§Ù„Ø´Ø­ÙˆÙ…         â”‚
â”‚  â›½ Ù…Ø®Ø²Ù† Ø§Ù„Ø³ÙˆÙ„Ø§Ø±                â”‚
â”‚  ğŸ› ï¸ Ù…Ø®Ø²Ù† Ø§Ù„Ø¹Ø¯Ø¯ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª        â”‚
â”‚  âš™ï¸ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
User selects: "âš™ï¸ Ù…Ø®Ø²Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±"
    â†“
Callback: "inv:perm:sf:1" (id = 1)
    â†“
Query: SELECT minRole FROM SubFeatureConfig WHERE id = 1
    â†“
Display Role Selection:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ğŸŸ¢ Ø£Ø¯Ù…Ù†     â”‚
â”‚                                 â”‚
â”‚  ğŸ”´ Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù†                   â”‚
â”‚  ğŸŸ¢ Ø£Ø¯Ù…Ù†     ğŸŸ¡ Ù…Ø´Ø±Ù            â”‚
â”‚  ğŸ”µ Ù…Ø³ØªØ®Ø¯Ù…                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
User selects: "ğŸ”µ Ù…Ø³ØªØ®Ø¯Ù…"
    â†“
Callback: "inv:perm:sf-set:1:USER"
    â†“
UPDATE SubFeatureConfig 
SET minRole = 'USER', 
    superAdminOnly = false 
WHERE id = 1
    â†“
Alert: "âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø¥Ù„Ù‰: ğŸ”µ Ù…Ø³ØªØ®Ø¯Ù…"
```

### Ø¹Ø±Ø¶ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©

```
Click: "ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©"
    â†“
Query 1: Get Department Role
    SELECT minRole 
    FROM DepartmentConfig 
    WHERE code = 'inventory-management'
    â†“
Query 2: Get SubFeatures (with Map deduplication)
    SELECT name, minRole, code
    FROM SubFeatureConfig 
    WHERE departmentCode = 'inventory-management'
    â†“
Deduplicate using Map:
    Map<code, SubFeature>
    â†“
Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†      â”‚
â”‚                                          â”‚
â”‚  ğŸ¢ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: ğŸŸ¢ Ø£Ø¯Ù…Ù†              â”‚
â”‚                                          â”‚
â”‚  Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙØ±Ø¹ÙŠØ©:                        â”‚
â”‚  â€¢ Ù…Ø®Ø²Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±: ğŸ”µ Ù…Ø³ØªØ®Ø¯Ù…           â”‚
â”‚  â€¢ Ù…Ø®Ø²Ù† Ø§Ù„Ø²ÙŠÙˆØª ÙˆØ§Ù„Ø´Ø­ÙˆÙ…: ğŸŸ¢ Ø£Ø¯Ù…Ù†         â”‚
â”‚  â€¢ Ù…Ø®Ø²Ù† Ø§Ù„Ø³ÙˆÙ„Ø§Ø±: ğŸŸ¢ Ø£Ø¯Ù…Ù†                â”‚
â”‚  â€¢ Ù…Ø®Ø²Ù† Ø§Ù„Ø¹Ø¯Ø¯ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª: ğŸŸ¢ Ø£Ø¯Ù…Ù†         â”‚
â”‚  â€¢ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†: ğŸ”´ Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù†      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ ØªØ¯ÙÙ‚ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†

### Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†               â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ‘¥ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ø§Ù„Ù‚Ø³Ù…          â”‚ â—„â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ Ù‚Ø³Ù…       â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ âš™ï¸ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù       â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ ÙˆØ¸ÙŠÙØ©     â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â¬…ï¸ Ø±Ø¬ÙˆØ¹                  â”‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
```

### ØªØ¯ÙÙ‚ Ø¹Ø±Ø¶ Ù…Ø³Ø¤ÙˆÙ„ÙŠ Ø§Ù„Ù‚Ø³Ù…

```
Click: "ğŸ‘¥ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ø§Ù„Ù‚Ø³Ù…"
    â†“
Query Database:
    SELECT da.*, u.telegramId, u.firstName, u.lastName 
    FROM DepartmentAdmin da
    JOIN User u ON da.userId = u.id
    WHERE da.departmentCode = 'inventory-management'
    â†“
Count: admins.length
    â†“
If empty:
    Display: "âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³Ø¤ÙˆÙ„ÙˆÙ† Ù„Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø­Ø§Ù„ÙŠØ§Ù‹"
Else:
    Display List:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ‘¥ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù† (2)           â”‚
    â”‚                                      â”‚
    â”‚  1ï¸âƒ£ Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯                        â”‚
    â”‚     ğŸ†” 7594239391                    â”‚
    â”‚     [âŒ Ø¥Ø²Ø§Ù„Ø©]                       â”‚
    â”‚                                      â”‚
    â”‚  2ï¸âƒ£ Ø¹Ù„ÙŠ Ø­Ø³Ù†                         â”‚
    â”‚     ğŸ†” 7594239392                    â”‚
    â”‚     [âŒ Ø¥Ø²Ø§Ù„Ø©]                       â”‚
    â”‚                                      â”‚
    â”‚  [â¬…ï¸ Ø±Ø¬ÙˆØ¹]                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ØªØ¯ÙÙ‚ Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ Ù‚Ø³Ù…

```
Click: "â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ Ù‚Ø³Ù…"
    â†“
Set State: waiting_dept_admin_id
    â†“
Display Message:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ Ù‚Ø³Ù…                    â”‚
â”‚                                        â”‚
â”‚  ğŸ“Œ Ø£Ø±Ø³Ù„ Telegram ID Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…         â”‚
â”‚  (Ù…Ø«Ø§Ù„: 7594239391)                   â”‚
â”‚                                        â”‚
â”‚  Ø£Ùˆ /cancel Ù„Ù„Ø¥Ù„ØºØ§Ø¡                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
User sends: "7594239391"
    â†“
Validate:
    1. Is numeric?
    2. User exists in DB?
    3. Not already admin?
    â†“
If valid:
    INSERT INTO DepartmentAdmin 
    (userId, departmentCode) 
    VALUES (?, 'inventory-management')
    â†“
    Alert: "âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­"
    â†“
    Return to admin list
Else:
    Show error message
```

### ØªØ¯ÙÙ‚ Ø¥Ø²Ø§Ù„Ø© Ù…Ø³Ø¤ÙˆÙ„ Ù‚Ø³Ù…

```
User clicks: "âŒ Ø¥Ø²Ø§Ù„Ø©" (Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø±Ù‚Ù… 1)
    â†“
Callback: "inv:admins:dept:remove:1" (adminId = 1)
    â†“
Confirm:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø²Ø§Ù„Ø©                      â”‚
â”‚                                        â”‚
â”‚  Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø²Ø§Ù„Ø©:                â”‚
â”‚  Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ (7594239391)                â”‚
â”‚  Ù…Ù† Ù…Ø³Ø¤ÙˆÙ„ÙŠ Ø§Ù„Ù‚Ø³Ù…ØŸ                      â”‚
â”‚                                        â”‚
â”‚  [âœ… Ù†Ø¹Ù…] [âŒ Ù„Ø§]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
If "âœ… Ù†Ø¹Ù…":
    DELETE FROM DepartmentAdmin 
    WHERE id = 1
    â†“
    Alert: "âœ… ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­"
    â†“
    Refresh list
```

### ØªØ¯ÙÙ‚ Ù…Ø³Ø¤ÙˆÙ„ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù

```
Click: "âš™ï¸ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù"
    â†“
Query:
    SELECT sfa.*, u.firstName, u.lastName, 
           sf.name as subFeatureName
    FROM SubFeatureAdmin sfa
    JOIN User u ON sfa.userId = u.id
    JOIN SubFeatureConfig sf ON sfa.subFeatureId = sf.id
    WHERE sf.departmentCode = 'inventory-management'
    â†“
Group by SubFeature:
    Map<subFeatureName, Admin[]>
    â†“
Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù (3)               â”‚
â”‚                                      â”‚
â”‚  â–ªï¸ Ù…Ø®Ø²Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±:                 â”‚
â”‚     â€¢ Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ [âŒ]                  â”‚
â”‚     â€¢ Ø¹Ù„ÙŠ Ø­Ø³Ù† [âŒ]                    â”‚
â”‚                                      â”‚
â”‚  â–ªï¸ Ù…Ø®Ø²Ù† Ø§Ù„Ø³ÙˆÙ„Ø§Ø±:                    â”‚
â”‚     â€¢ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ [âŒ]                   â”‚
â”‚                                      â”‚
â”‚  [â¬…ï¸ Ø±Ø¬ÙˆØ¹]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ØªØ¯ÙÙ‚ Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ ÙˆØ¸ÙŠÙØ©

```
Click: "â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ ÙˆØ¸ÙŠÙØ©"
    â†“
Query SubFeatures:
    SELECT id, name 
    FROM SubFeatureConfig 
    WHERE departmentCode = 'inventory-management'
    â†“
Display Selection:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ø§Ø®ØªØ± Ø§Ù„ÙˆØ¸ÙŠÙØ©:                     â”‚
â”‚                                    â”‚
â”‚  [âš™ï¸ Ù…Ø®Ø²Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±]              â”‚
â”‚  [ğŸ›¢ï¸ Ù…Ø®Ø²Ù† Ø§Ù„Ø²ÙŠÙˆØª ÙˆØ§Ù„Ø´Ø­ÙˆÙ…]         â”‚
â”‚  [â›½ Ù…Ø®Ø²Ù† Ø§Ù„Ø³ÙˆÙ„Ø§Ø±]                 â”‚
â”‚  [ğŸ› ï¸ Ù…Ø®Ø²Ù† Ø§Ù„Ø¹Ø¯Ø¯ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
User selects: "âš™ï¸ Ù…Ø®Ø²Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±"
    â†“
Set State: waiting_sf_admin_id + store subFeatureId
    â†“
Ask for Telegram ID
    â†“
Validate & Insert
    â†“
Success message
```

---

## âš¡ ØªØ¯ÙÙ‚ Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

### Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```
Click: "âš¡ Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"
    â†“
Query Database:
    SELECT enabled, name 
    FROM DepartmentConfig 
    WHERE code = 'inventory-management'
    â†“
Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª                â”‚
â”‚                                      â”‚
â”‚  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ğŸŸ¢ Ù…ÙØ¹Ù‘Ù„           â”‚
â”‚                                      â”‚
â”‚  ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø²Ù†:                   â”‚
â”‚  Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†        â”‚
â”‚                                      â”‚
â”‚  [ğŸ”´ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ø³Ù…]                    â”‚
â”‚  [ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª]                     â”‚
â”‚  [â¬…ï¸ Ø±Ø¬ÙˆØ¹]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ØªØ¯ÙÙ‚ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© (ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„)

```
Click: "ğŸ”´ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ø³Ù…" (current: enabled = true)
    â†“
Toggle Database:
    UPDATE DepartmentConfig 
    SET enabled = NOT enabled 
    WHERE code = 'inventory-management'
    â†“
If toggled to disabled:
    Alert: "âœ… ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­"
    New button text: "ğŸŸ¢ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‚Ø³Ù…"
If toggled to enabled:
    Alert: "âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‚Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­"
    New button text: "ğŸ”´ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ø³Ù…"
    â†“
Refresh menu with new state
```

### ØªØ¯ÙÙ‚ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

```
Click: "ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª"
    â†“
Query 1: Department Info
    SELECT enabled, minRole 
    FROM DepartmentConfig 
    WHERE code = 'inventory-management'
    â†“
Query 2: Count Department Admins
    SELECT COUNT(*) 
    FROM DepartmentAdmin 
    WHERE departmentCode = 'inventory-management'
    â†“
Query 3: Count SubFeatures
    SELECT COUNT(*) 
    FROM SubFeatureConfig 
    WHERE departmentCode = 'inventory-management'
    â†“
Query 4: Count SubFeature Admins
    SELECT COUNT(*) 
    FROM SubFeatureAdmin sfa
    JOIN SubFeatureConfig sf ON sfa.subFeatureId = sf.id
    WHERE sf.departmentCode = 'inventory-management'
    â†“
Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù‚Ø³Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†             â”‚
â”‚                                      â”‚
â”‚  ğŸ‘¥ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ø§Ù„Ù‚Ø³Ù…: 1                  â”‚
â”‚  âš™ï¸ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙØ±Ø¹ÙŠØ©: 5               â”‚
â”‚  ğŸ‘¤ Ù…Ø³Ø¤ÙˆÙ„Ùˆ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù: 4                â”‚
â”‚  ğŸ” Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø±ØªØ¨Ø©: ğŸŸ¢ Ø£Ø¯Ù…Ù†     â”‚
â”‚  ğŸ“Œ Ø§Ù„Ø­Ø§Ù„Ø©: ğŸŸ¢ Ù…ÙØ¹Ù‘Ù„                 â”‚
â”‚                                      â”‚
â”‚  [â¬…ï¸ Ø±Ø¬ÙˆØ¹]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ ØªØ¯ÙÙ‚Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Handler Registration Flow

```typescript
// bot.ts
bot.use(conversationMiddleware)
bot.use(authMiddleware)
bot.use(loggingMiddleware)
    â†“
// Feature Loading
bot.use(welcomeComposer)      // FIRST - highest priority
    â†“
bot.use(inventoryComposer)    // Includes all inventory handlers
    â†“
bot.use(mainMenuComposer)     // LAST - lowest priority
    â†“
bot.use(unhandledCallbackHandler)
```

### Inventory Composer Registration

```typescript
// inventory-management/index.ts
composer.use(inventorySectionManagementHandler)  // 1ï¸âƒ£ FIRST
composer.use(inventoryMainHandler)               // 2ï¸âƒ£
composer.use(inventorySubFeaturesHandler)        // 3ï¸âƒ£
composer.use(inventoryManagementHandler)         // 4ï¸âƒ£ LAST
```

### Callback Query Matching Order

```
Incoming callback: "menu:sub:inventory-management:inv:section-management"
    â†“
Check Handler 1: inventorySectionManagementHandler
    Pattern: /^menu:sub:inventory-management:inv:section-management$/
    Match: âœ… YES â†’ Execute handler
    â†“
If no match, check Handler 2: inventoryMainHandler
If no match, check Handler 3: inventorySubFeaturesHandler
If no match, check Handler 4: inventoryManagementHandler
If no match â†’ "unhandled-callback-query"
```

### Database Schema Relationships

```
User (1) â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€ (N) DepartmentAdmin
               â”‚
               â””â”€â”€â”€â”€â”€â”€ (N) SubFeatureAdmin

DepartmentConfig (1) â”€â”€â”€ (N) SubFeatureConfig

DepartmentAdmin (N) â”€â”€â”€ (1) DepartmentConfig

SubFeatureAdmin (N) â”€â”€â”€ (1) SubFeatureConfig
                  (N) â”€â”€â”€ (1) User
```

---

## ğŸ”„ State Management Flow

### Conversation State for Adding Admins

```typescript
// State structure
interface ConversationState {
  waiting_dept_admin_id?: boolean
  waiting_sf_admin_id?: boolean
  selected_subfeature_id?: number
}

// Flow
User clicks "â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ Ù‚Ø³Ù…"
    â†“
Set: conversation.waiting_dept_admin_id = true
    â†“
User sends message with ID
    â†“
text() handler catches message
    â†“
Check: conversation.waiting_dept_admin_id?
    â†“
If true:
    - Validate ID
    - Add to database
    - Clear state: delete conversation.waiting_dept_admin_id
    - Show success message
```

---

## ğŸ¨ UI Update Flow

### Dynamic Button Text

```typescript
// Control Menu - Dynamic Toggle Button
const enabled = dept.enabled

const toggleText = enabled ? 'ğŸ”´ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù‚Ø³Ù…' : 'ğŸŸ¢ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‚Ø³Ù…'
const statusText = enabled ? 'ğŸŸ¢ Ù…ÙØ¹Ù‘Ù„' : 'ğŸ”´ Ù…Ø¹Ø·Ù‘Ù„'

keyboard.text(toggleText, 'inv:control:toggle')

// On click:
Toggle database â†’ Update enabled value â†’ Refresh menu with new texts
```

### Map Deduplication in Permissions Display

```typescript
// Prevent duplicate display
const subFeatures = await Database.prisma.subFeatureConfig.findMany({
  where: { departmentCode: 'inventory-management' }
})

// Use Map to deduplicate by code
const uniqueSubFeatures = new Map<string, SubFeatureConfig>()
for (const sf of subFeatures) {
  if (!uniqueSubFeatures.has(sf.code)) {
    uniqueSubFeatures.set(sf.code, sf)
  }
}

// Display only unique items
for (const [code, sf] of uniqueSubFeatures) {
  message += `  â€¢ ${sf.name}: **${ROLES[sf.minRole].label}**\n`
}
```

---

## ğŸ“Š Complete Flow Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Main Menu      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Inventory Dept â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ Spare     â”‚    â”‚ Oils &      â”‚    â”‚ Section   â”‚
    â”‚ Parts     â”‚    â”‚ Greases     â”‚    â”‚ Mgmt      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
                â”‚                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Diesel      â”‚              â”‚ Permissions     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ Admins          â”‚
                â”‚                     â”‚ Control         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Tools &     â”‚
         â”‚ Equipment   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø±Ø¬Ø© ÙÙŠ Ø§Ù„ØªØ¯ÙÙ‚

1. **Handler Priority**: `section-management` Ù…Ø³Ø¬Ù„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø§Ø¹ØªØ±Ø§Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
2. **Pattern Matching**: ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…Ø·Ø§Ø¨Ù‚Ø© ØªÙ…Ø§Ù…Ù‹Ø§
3. **State Management**: Ø§Ø³ØªØ®Ø¯Ø§Ù… conversation state Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø®Ø·ÙˆØ§Øª
4. **Error Handling**: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙÙŠ ÙƒÙ„ Ø®Ø·ÙˆØ©
5. **Map Deduplication**: Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶
6. **Database Transactions**: Ø§Ø³ØªØ®Ø¯Ø§Ù… queries Ø¢Ù…Ù†Ø© ÙˆÙ…Ø­Ù…ÙŠØ©

---

**ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø©:** Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª ØªÙ… Ø§Ø®ØªØ¨Ø§Ø±Ù‡Ø§ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ù…Ù„Ù‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­. Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„ØŒ Ø±Ø§Ø¬Ø¹ Ù…Ù„Ù Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙˆØ§Ù„Ø­Ù„ÙˆÙ„.
