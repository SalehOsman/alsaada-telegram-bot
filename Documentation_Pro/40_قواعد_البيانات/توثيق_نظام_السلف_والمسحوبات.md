# توثيق نظام السلف والمسحوبات لقسم شؤون العاملين

## 1. الأهداف العامة
- إدارة عمليات السلف المالية والمسحوبات العينية للعاملين بشكل احترافي.
- توفير لوحة تحكم متكاملة للأدمين والسوبر أدمين.
- تجهيز النظام للربط مع الرواتب والأجور مستقبلاً.
- تقديم تقارير دقيقة وقابلة للتصدير.
- ضمان سهولة الاستخدام ووضوح الواجهات.

---

## 2. الصلاحيات

| الدور           | الصلاحيات                                                                                   |
|-----------------|--------------------------------------------------------------------------------------------|
| السوبر أدمين     | إدارة التسويات (فردية/جماعية/مجموعات)، إدارة الأصناف العينية وأسعارها، لوحة تحكم شاملة      |
| الأدمين         | إدارة القسم بالكامل (إضافة/تعديل/حذف عمليات، عرض تقارير القسم)                              |
| المستخدم        | لا صلاحيات ولا قسم خاص حالياً                                                               |

---

## 3. التدفقات الرئيسية

### 3.1 تسجيل عملية جديدة (سلفة أو مسحوب)
1. اختيار العامل من قائمة الموظفين (مع دعم البحث والتصفية).
2. اختيار نوع العملية:
   - سلفة نقدية.
   - مسحوب عيني.
3. إذا كانت العملية نقدية:
   - إدخال مبلغ السلفة.
   - إدخال بيان إضافي (اختياري).
4. إذا كانت العملية عينية:
   - اختيار الصنف من قائمة الأصناف العينية (تظهر مع السعر).
   - إدخال الكمية.
   - حساب المبلغ تلقائياً (الكمية × السعر).
   - إدخال بيان إضافي (اختياري).
5. مراجعة البيانات قبل الحفظ (شاشة تأكيد).
6. حفظ العملية وربطها بالعامل.

---

### 3.2 إدارة الأصناف العينية
- لوحة تحكم خاصة بالسوبر أدمين فقط.
- إضافة صنف جديد (اسم، وصف، سعر، وحدة).
- تعديل بيانات صنف موجود.
- حذف صنف.
- عرض قائمة الأصناف مع إمكانية البحث والتصفية.

---

### 3.3 التسويات
- حقل "التسوية" لكل عملية (تمت التسوية / لم تتم التسوية).
- التسوية متاحة فقط للسوبر أدمين.
- أنواع التسوية:
  - فردية: تسوية عملية واحدة.
  - جماعية: تسوية جميع العمليات دفعة واحدة.
  - مخصصة: تسوية مجموعة مختارة من العمليات.
- واجهة تسوية سهلة (تحديد العمليات، اختيار نوع التسوية، تأكيد).

---

### 3.4 التقارير
- تقارير شهرية/أسبوعية/مخصصة لكل عامل أو لكل القسم.
- عرض إجمالي السلف والمسحوبات، مع تفاصيل آخر العمليات.
- تصدير التقارير (PDF/Excel).
- سجل التعديلات على العمليات والتسويات.

---

### 3.5 لوحة التحكم الرئيسية
- متاحة للسوبر أدمين فقط.
- إدارة الأصناف العينية.
- إدارة التسويات.
- إعدادات النظام (تخصيص فترات التقارير، صلاحيات المستخدمين، إلخ).
- سجل النشاطات والتعديلات.

---

## 4. واجهة المستخدم

### 4.1 التصميم العام
- واجهة أنيقة وعصرية (ألوان هادئة، خطوط واضحة، أيقونات معبرة).
- تقسيم واضح للأقسام (عمليات، أصناف، تقارير، تسويات، إعدادات).
- دعم اللغة العربية بالكامل.
- سهولة التنقل بين الشاشات.
- رسائل توضيحية في كل خطوة.
- دعم البحث والتصفية في القوائم.

### 4.2 شاشات رئيسية
- شاشة تسجيل عملية جديدة.
- شاشة إدارة الأصناف العينية.
- شاشة التسويات.
- شاشة التقارير.
- شاشة إعدادات النظام.

---

## 5. قاعدة البيانات (مقترح Prisma/PostgreSQL)

### 5.1 الجداول الأساسية
- employees: بيانات العاملين.
- transactions: العمليات (سلفة/مسحوب)، مع حقل التسوية.
- items: الأصناف العينية وأسعارها.
- users: بيانات المستخدمين وصلاحياتهم.
- transaction_settlements: سجل التسويات.
- activity_logs: سجل النشاطات والتعديلات.

---

## 6. نقاط التوسع المستقبلية
- ربط النظام بنظام الرواتب والأجور (خصومات تلقائية).
- إضافة صلاحيات للمستخدم العادي (عرض عملياته فقط).
- دعم الإشعارات والتنبيهات.
- تكامل مع أنظمة خارجية (API).

---

## 7. ملاحظات أمنية
- حماية جميع العمليات الحساسة بصلاحيات دقيقة.
- تسجيل جميع التعديلات في سجل النشاطات.
- تشفير بيانات المستخدمين والمعاملات.

---

## 8. اقتراحات إضافية للوحة التحكم
- سجل التعديلات على الأصناف والعمليات.
- إدارة صلاحيات المستخدمين.
- تخصيص إعدادات النظام (فترات التقارير، تنسيقات التصدير).
- دعم استيراد وتصدير بيانات الأصناف والعمليات.

---
